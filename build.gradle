System.setProperty("file.encoding", "UTF-8")

buildscript {
    repositories {
        jcenter()
        maven {
            url "${System.properties['user.home']}/.m2/repository/"
        }

        maven {
            url "http://sandec.bintray.com/repo"
        }

        maven {
            url "http://mix-software.com:8081/nexus/content/repositories/jpro-snapshots"
        }

        maven {
            url "http://mix-software.com:8081/nexus/content/repositories/jpro"
        }
    }

    dependencies {
        classpath "SANDEC:simplefx-plugin-gradle:$simplefxVersion"
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.3'
    }
}

allprojects {
    repositories {
        mavenLocal()
        jcenter()
        maven {
            url "${System.properties['user.home']}/.m2/repository/"
        }

        maven {
            url "http://sandec.bintray.com/repo"
        }

        maven {
            url "http://mix-software.com:8081/nexus/content/repositories/jpro-snapshots"
        }

        maven {
            url "http://mix-software.com:8081/nexus/content/repositories/jpro"
        }
    }

    apply plugin: 'java'
    apply plugin: 'de.sandec.simplefx'

    group = 'SANDEC'
    version = "$simplefx_util_version"

    dependencies {
        testCompile "junit:junit:4.12"
    }
}

configure([project(':example')]) {
    dependencies {
        compile rootProject

        // shouldn't be required, have to investigate!
        compile group: 'org.scala-lang', name: 'scala-reflect', version: '2.11.11'
        compile "org.scala-lang:scala-reflect:2.11.11"
    }
    //apply plugin: 'java'
    //apply plugin: 'de.sandec.simplefx'
    apply plugin: 'application'
    mainClassName = 'jnodes.example.TestCarousel'
}

configure([rootProject]) {

    apply plugin: 'java'
    apply plugin: 'de.sandec.simplefx'
    apply plugin: 'maven-publish'
    apply plugin: 'com.jfrog.bintray'

    dependencies {
        testCompile 'junit:junit:4.12'
    }

    test {
        jvmArgs = ['-Dglass.platform=Monocle', '-Dmonocle.platform=Headless']
    }

    publishing {
        publications {
            mavenJava(MavenPublication) {
                from components.java
                groupId project.group
                artifactId project.name
                version project.version
            }
        }
    }

    bintray {
        if(project.hasProperty("BINTRAY_USER")) {
            user = BINTRAY_USER
            key  = BINTRAY_KEY
        }
        publications = ['mavenJava']
        publish = true
        override = true
        pkg {
            repo = 'repo'
            name = project.name
            userOrg = 'sandec'
        }
    }

}
